From d253a03cf88e2e2018985b6936ed7618461a4559 Mon Sep 17 00:00:00 2001
From: Mehdi Sabwat <mehdi@videolabs.io>
Date: Wed, 3 Aug 2022 13:17:46 +0200
Subject: [PATCH 70/85] adapt to new emscripten version

---
 modules/access/emjsfile.c           | 2 +-
 modules/video_output/emscripten.cpp | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/modules/access/emjsfile.c b/modules/access/emjsfile.c
index 920a408f95..0fea11afc4 100644
--- a/modules/access/emjsfile.c
+++ b/modules/access/emjsfile.c
@@ -204,7 +204,7 @@ static int EmFileOpen( vlc_object_t *p_this ) {
     */
     MAIN_THREAD_EM_ASM({
         const thread_id = $0;
-        let w = Module.PThread.pthreads[thread_id].worker;
+        let w = Module.PThread.pthreads[thread_id];
         function handleFileRequest(e) {
             const msg = e.data;
             if (msg.type === "requestFile") {
diff --git a/modules/video_output/emscripten.cpp b/modules/video_output/emscripten.cpp
index 9fd34350b5..e22342e894 100644
--- a/modules/video_output/emscripten.cpp
+++ b/modules/video_output/emscripten.cpp
@@ -188,7 +188,7 @@ static int Open (vlc_gl_t *gl, unsigned width, unsigned height)
                 bmp.close();
             }
         }
-        let w = Module.PThread.pthreads[$0].worker;
+        let w = Module.PThread.pthreads[$0];
         w.addEventListener('message', function (e) {
             let msg = e['data'];
             if (msg.customCmd == 'getVoutMessagePort') {
-- 
2.43.0

