From 7d9afdeabbc61e1f0710430cf8239cfc2df9a868 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Hugo=20Beauz=C3=A9e-Luyssen?= <hugo@beauzee.fr>
Date: Thu, 12 May 2022 09:48:20 +0200
Subject: [PATCH 47/63] webcodec: Don't optimize for latency

This seems to pace the decoding better but is definitely not a stable
enough solution, more of a temporary work around
---
 modules/codec/webcodec.cpp | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/modules/codec/webcodec.cpp b/modules/codec/webcodec.cpp
index 9eb9d54bad..1c52726b5e 100644
--- a/modules/codec/webcodec.cpp
+++ b/modules/codec/webcodec.cpp
@@ -164,11 +164,11 @@ static emval getDecoderConfig( decoder_t* dec, bool includeExtraData )
     default:
         return emval::undefined();
     }
-    decoderConfig.set( "codedWidth", dec->fmt_in.video.i_width );
-    decoderConfig.set( "codedHeight", dec->fmt_in.video.i_height );
-    decoderConfig.set( "displayAspectWidth", dec->fmt_in.video.i_visible_width );
-    decoderConfig.set( "displayAspectHeight", dec->fmt_in.video.i_visible_height );
-    decoderConfig.set( "optimizeForLatency", true );
+    decoderConfig.set( "codedWidth", dec->fmt_in->video.i_width );
+    decoderConfig.set( "codedHeight", dec->fmt_in->video.i_height );
+    decoderConfig.set( "displayAspectWidth", dec->fmt_in->video.i_visible_width );
+    decoderConfig.set( "displayAspectHeight", dec->fmt_in->video.i_visible_height );
+    decoderConfig.set( "optimizeForLatency", false );
     if ( includeExtraData )
     {
         if ( dec->fmt_in->i_extra > 0 )
-- 
2.43.0

