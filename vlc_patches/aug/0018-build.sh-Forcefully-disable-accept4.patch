From 3f2510e7560b7d107c26be8908a1c07b428bda86 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Hugo=20Beauz=C3=A9e-Luyssen?= <hugo@beauzee.fr>
Date: Thu, 3 Feb 2022 09:30:49 +0100
Subject: [PATCH 18/85] build.sh: Forcefully disable accept4

In order to declare vlc_cloexec
---
 extras/package/wasm-emscripten/build.sh | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/extras/package/wasm-emscripten/build.sh b/extras/package/wasm-emscripten/build.sh
index 69d6b98c47..c1ea999806 100755
--- a/extras/package/wasm-emscripten/build.sh
+++ b/extras/package/wasm-emscripten/build.sh
@@ -164,6 +164,8 @@ if [ $BUILD_MODE -eq 1 ]; then
                         --disable-sout --disable-vlm --disable-a52 --disable-xcb --disable-lua \
                         --disable-addonmanagermodules --disable-ssp --disable-nls \
                         --enable-gles2 \
+                        ac_cv_func_if_nameindex=yes ac_cv_header_sys_shm_h=no \
+                        ac_cv_func_accept4=no \
                         --with-contrib="$VLC_SRCPATH"/contrib/wasm32-unknown-emscripten
 fi
 
-- 
2.43.0

