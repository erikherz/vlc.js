From 625f01bd52acec1733fe3ddab58aac867626ffa4 Mon Sep 17 00:00:00 2001
From: Alexandre Janniaux <ajanni@videolabs.io>
Date: Tue, 22 Feb 2022 17:55:01 +0100
Subject: [PATCH 35/85] vlc_opengl_filter: add gl pointer

---
 include/vlc_opengl_filter.h           | 1 +
 modules/video_output/opengl/filters.c | 1 +
 2 files changed, 2 insertions(+)

diff --git a/include/vlc_opengl_filter.h b/include/vlc_opengl_filter.h
index 8cffea7708..02228ec15c 100644
--- a/include/vlc_opengl_filter.h
+++ b/include/vlc_opengl_filter.h
@@ -85,6 +85,7 @@ struct vlc_gl_filter {
     vlc_object_t obj;
     module_t *module;
 
+    vlc_gl_t *gl;
     const struct vlc_gl_api *api;
 
     struct {
diff --git a/modules/video_output/opengl/filters.c b/modules/video_output/opengl/filters.c
index b93c1ee2fe..abd00b755b 100644
--- a/modules/video_output/opengl/filters.c
+++ b/modules/video_output/opengl/filters.c
@@ -183,6 +183,7 @@ vlc_gl_filters_Append(struct vlc_gl_filters *filters, const char *name,
     struct vlc_gl_filter *filter = vlc_gl_filter_New(filters->gl, filters->api);
     if (!filter)
         return NULL;
+    filter->gl = filters->gl;
 
     struct vlc_gl_filter_priv *priv = vlc_gl_filter_PRIV(filter);
 
-- 
2.43.0

